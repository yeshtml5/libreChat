# 02. 실행방법

LibreChat 개발 환경을 단계별로 설정하고 실행하는 방법입니다.

## 1. Docker로 전체 스택 실행 (프로덕션 환경)

```bash
docker compose up -d
```

- **접속 URL**: http://localhost:3080
- **특징**: 프로덕션 빌드된 버전, 변경사항 즉시 반영 안됨
- **용도**: 최종 테스트, 프로덕션 환경 확인

## 2. 개발 환경 설정 (번역 작업 및 개발용) - 단계별 진행

### 단계 1: 의존성 설치

```bash
yarn install
```

### 단계 2: 공유 패키지 빌드 (순서대로 실행)

```bash
yarn build:data-provider
```

```bash
yarn build:data-schemas
```

```bash
yarn build:api
```

```bash
yarn build:client-package
```

### 단계 3: 개발 서버 실행

```bash
yarn frontend:dev
```

- **접속 URL**: http://localhost:3090
- **특징**: 실시간 변경사항 반영 (Hot Reload)
- **용도**: 번역 작업, UI 개발, 실시간 개발

## 3. 포트별 서버 구분

| 포트 | 환경     | 실행 방법              | 특징                            |
| ---- | -------- | ---------------------- | ------------------------------- |
| 3080 | 프로덕션 | `docker compose up -d` | 빌드된 버전, 변경사항 반영 안됨 |
| 3090 | 개발     | `yarn frontend:dev`    | 실시간 변경사항 반영            |

## 4. 번역 파일 수정 시 워크플로

### 단계 1: 개발 서버 실행

```bash
yarn frontend:dev
```

### 단계 2: 번역 파일 수정

- 파일 위치: `client/src/locales/ko/translation.json`
- 에디터에서 한국어 번역 수정

### 단계 3: 브라우저에서 확인

- URL: http://localhost:3090
- Vite가 변경사항을 감지하여 자동으로 페이지 새로고침

## 5. 문제 해결

### 의존성 오류 발생 시

#### 단계 1: 기존 의존성 삭제

```bash
rm -rf node_modules yarn.lock
```

#### 단계 2: 의존성 재설치

```bash
yarn install
```

#### 단계 3: 공유 패키지 재빌드 (순서대로)

```bash
yarn build:data-provider
yarn build:data-schemas
yarn build:api
yarn build:client-package
```

### Docker 서버 관리

```bash
# Docker 컨테이너 전체 중지
docker compose down
```

```bash
# LibreChat 컨테이너만 중지
docker stop LibreChat
```

```bash
# Docker 컨테이너 상태 확인
docker ps
```

## 6. 권장 개발 환경

- **번역 작업**: http://localhost:3090 (개발 서버)
- **최종 테스트**: http://localhost:3080 (Docker 프로덕션)
- **패키지 매니저**: yarn만 사용 (프로젝트에서 yarn@4.9.4 사용)

  # Docker는 그대로 두고

  yarn install
  yarn build:data-provider
  yarn build:data-schemas
  yarn build:api
  yarn build:client-package
  yarn frontend:dev

  # 개발: http://localhost:3090 사용

  # 최종 확인 시에만:

  docker compose down
  yarn frontend # 빌드
  docker compose up -d

  # 확인: http://localhost:3080
