# 프론트엔드 개발 가이드

LibreChat 프론트엔드 개발을 위한 상세 가이드입니다.

## 📁 프론트엔드 구조 개요

LibreChat의 프론트엔드는 **React 19**를 기반으로 한 모던 웹 애플리케이션입니다.

```
client/
├── src/
│   ├── App.jsx                 # 메인 애플리케이션 컴포넌트
│   ├── components/             # UI 컴포넌트들
│   │   ├── Chat/              # 채팅 관련 컴포넌트
│   │   ├── Messages/          # 메시지 표시 컴포넌트
│   │   ├── Nav/               # 네비게이션 컴포넌트
│   │   └── ui/                # 기본 UI 컴포넌트 (버튼, 다이얼로그 등)
│   ├── hooks/                 # 커스텀 React 훅
│   ├── store/                 # Recoil 상태 관리
│   ├── utils/                 # 유틸리티 함수
│   └── locales/              # 다국어 번역 파일
├── public/                    # 정적 파일들
└── dist/                     # 빌드된 파일들
```

## 🚀 개발 환경 설정 (Yarn 워크스페이스)

### 1. 필수 사전 작업

**의존성 설치**
```bash
# 루트 디렉토리에서 모든 워크스페이스 의존성 설치
yarn install
# 또는 단순히
yarn
```

**패키지 빌드 (반드시 프론트엔드 시작 전에 실행)**
```bash
# 루트 디렉토리에서 순서대로 실행
yarn build:data-schemas     # 1순위: 스키마 빌드
yarn build:data-provider    # 2순위: API 라이브러리
yarn build:api              # 3순위: 백엔드 공통 로직
yarn build:client-package   # 4순위: UI 컴포넌트
```

**또는 한 번에:**
```bash
yarn frontend:dev
```
이 명령어는 자동으로 필요한 패키지들을 빌드한 후 프론트엔드 개발 서버를 시작합니다.

### 2. 개발 서버 시작

```bash
# 방법 1: 자동 패키지 빌드 포함
yarn frontend:dev

# 방법 2: 워크스페이스 직접 실행
yarn workspace client dev

# 방법 3: 클라이언트 디렉토리에서 직접
cd client
yarn dev
```

개발 서버는 기본적으로 `http://localhost:3080`에서 실행됩니다.

## 🛠️ 주요 기술 스택

### Core Technologies
- **React 19** - 최신 리액트 기능 활용
- **Vite** - 빠른 번들링 및 HMR
- **TypeScript** - 타입 안전성

### 상태 관리
- **Recoil** - 글로벌 상태 관리
- **React Query (@tanstack/react-query)** - 서버 상태 관리 및 캐싱

### UI 라이브러리
- **Radix UI** - 접근성 있는 컴포넌트 프리미티브
- **Tailwind CSS** - 유틸리티 기반 CSS 프레임워크
- **Framer Motion** - 애니메이션

### 국제화
- **i18next** - 다국어 지원

## 📝 개발 워크플로우

### 1. 새 기능 개발

1. **컴포넌트 생성**
```bash
# 예: 새로운 채팅 기능 컴포넌트
touch client/src/components/Chat/NewChatFeature.tsx
```

2. **상태 관리 설정 (필요한 경우)**
```javascript
// client/src/store/newFeature.ts
import { atom } from 'recoil';

export const newFeatureState = atom({
  key: 'newFeatureState',
  default: {
    isEnabled: false,
    data: null
  }
});
```

3. **API 연동**
```javascript
// client/src/data-provider/queries.ts 에 추가
import { useQuery } from '@tanstack/react-query';

export const useNewFeature = () => {
  return useQuery({
    queryKey: ['newFeature'],
    queryFn: () => api.getNewFeature()
  });
};
```

### 2. 스타일링 가이드라인

```jsx
// Tailwind CSS 클래스 사용 예시
const ChatMessage = ({ message }) => (
  <div className="flex items-start space-x-3 p-4 hover:bg-gray-50 transition-colors">
    <div className="flex-shrink-0">
      <Avatar src={message.avatar} />
    </div>
    <div className="flex-1 min-w-0">
      <p className="text-sm font-medium text-gray-900">
        {message.author}
      </p>
      <p className="text-sm text-gray-500">
        {message.content}
      </p>
    </div>
  </div>
);
```

## 🔧 개발 도구

### 타입 체크
```bash
# 방법 1: 워크스페이스 직접 실행
yarn workspace client typecheck

# 방법 2: 클라이언트 디렉토리에서 실행
cd client
yarn typecheck
```

### 린트 및 포맷팅
```bash
# 루트에서 실행 (모든 워크스페이스 대상)
yarn lint             # 린트 체크
yarn lint:fix         # 자동 수정
yarn format           # Prettier 포맷팅
```

### 테스트
```bash
# 방법 1: 루트에서 클라이언트 테스트 실행
yarn test:client

# 방법 2: 워크스페이스 직접 실행
yarn workspace client test:ci

# 방법 3: 클라이언트 디렉토리에서 실행
cd client
yarn test:ci
```

## 🌐 다국어 지원

새로운 텍스트 추가시 다국어 파일에 키를 추가해야 합니다:

```javascript
// client/src/locales/ko/translation.json
{
  "common": {
    "save": "저장",
    "cancel": "취소"
  },
  "chat": {
    "newMessage": "새 메시지",
    "sendMessage": "메시지 보내기"
  }
}
```

컴포넌트에서 사용:
```jsx
import { useLocalize } from '~/hooks';

const MyComponent = () => {
  const localize = useLocalize();
  
  return (
    <button>{localize('common.save')}</button>
  );
};
```

## 🎨 테마 및 커스터마이징

LibreChat은 테마 시스템을 지원합니다:

```javascript
// 환경변수로 테마 설정
VITE_THEME_PRIMARY_COLOR=#FF6B6B
VITE_THEME_SECONDARY_COLOR=#4ECDC4
```

또는 `client/src/theme/` 디렉토리에서 테마를 수정할 수 있습니다.

## 📱 반응형 디자인

모든 컴포넌트는 반응형으로 설계되어야 합니다:

```jsx
const ResponsiveComponent = () => (
  <div className="
    flex flex-col space-y-4        // 모바일: 세로 배치
    md:flex-row md:space-y-0 md:space-x-4  // 데스크톱: 가로 배치
  ">
    <div className="w-full md:w-1/2">컨텐츠 1</div>
    <div className="w-full md:w-1/2">컨텐츠 2</div>
  </div>
);
```

## 🚨 주의사항

1. **패키지 의존성**: 프론트엔드 개발 전에 반드시 관련 패키지들을 먼저 빌드해야 합니다.

2. **상태 관리**: 글로벌 상태는 Recoil을, 서버 상태는 React Query를 사용합니다.

3. **접근성**: Radix UI 컴포넌트를 사용하여 웹 접근성을 준수합니다.

4. **성능**: React 19의 concurrent 기능을 활용하여 성능을 최적화합니다.

## 🐛 트러블슈팅

### 빌드 에러가 발생하는 경우 (Yarn 워크스페이스)
```bash
# 1. 모든 워크스페이스 node_modules 재설치
rm -rf node_modules */node_modules packages/*/node_modules yarn.lock
yarn install

# 2. 패키지 순서대로 다시 빌드
yarn build:data-schemas
yarn build:data-provider
yarn build:api
yarn build:client-package

# 3. 클라이언트 캐시 클리어
cd client
rm -rf dist node_modules/.vite
yarn dev
```

### 타입 에러 해결
```bash
# 방법 1: 워크스페이스에서 타입 체크
yarn workspace client typecheck

# 방법 2: 직접 실행
cd client
yarn tsc --noEmit --skipLibCheck
```