# 폴더 구조 및 기능 가이드

LibreChat 프로젝트의 전체 폴더 구조와 각 폴더의 역할 및 주요 기능에 대한 상세한 설명입니다.

## 🏗️ 전체 프로젝트 구조

```
LibreChat/
├── 📁 api/                    # 백엔드 서버 (Node.js/Express)
├── 📁 client/                 # 프론트엔드 (React)
├── 📁 packages/               # 공유 패키지들
├── 📁 config/                 # 설정 및 유틸리티 스크립트
├── 📁 e2e/                    # End-to-End 테스트
├── 📁 helm/                   # Kubernetes 배포 설정
├── 📁 redis-config/           # Redis 설정 파일
├── 📁 utils/                  # 유틸리티 스크립트
├── 📁 data-node/              # MongoDB 데이터 저장소
├── 📁 meili_data_v1.12/       # MeiliSearch 인덱스 데이터
├── 📁 uploads/                # 사용자 업로드 파일
├── 📁 logs/                   # 애플리케이션 로그
└── 📄 Configuration Files      # 설정 파일들
```

---

## 🖥️ API 폴더 (백엔드)

### `/api` - 백엔드 서버 메인

```
api/
├── 📁 app/                    # 애플리케이션 로직
│   ├── 📁 clients/           # AI 제공업체 클라이언트
│   └── index.js              # 앱 진입점
├── 📁 server/                # Express 서버 설정
│   ├── 📁 controllers/       # API 컨트롤러
│   ├── 📁 middleware/        # 미들웨어
│   ├── 📁 routes/            # API 라우트
│   ├── 📁 services/          # 비즈니스 로직
│   └── index.js              # 서버 진입점
├── 📁 models/                # MongoDB 모델
├── 📁 utils/                 # 유틸리티 함수
├── 📁 strategies/            # 인증 전략
└── 📁 test/                  # 백엔드 테스트
```

#### **주요 기능:**

**📂 `/api/app/clients/`**
- **역할**: AI 제공업체와의 통신 담당
- **주요 파일들**:
  - `OpenAIClient.js` - OpenAI GPT 모델 연동
  - `AnthropicClient.js` - Claude 모델 연동  
  - `GoogleClient.js` - Gemini 모델 연동
  - `BaseClient.js` - 모든 클라이언트의 기본 클래스
- **기능**: API 호출, 스트리밍, 토큰 관리, 에러 처리

**📂 `/api/server/controllers/`**
- **역할**: HTTP 요청 처리 로직
- **주요 컨트롤러들**:
  - `AuthController.js` - 사용자 인증
  - `ModelController.js` - AI 모델 관리
  - `EndpointController.js` - 엔드포인트 설정
- **기능**: 요청 검증, 응답 생성, 에러 핸들링

**📂 `/api/server/routes/`**
- **역할**: API 엔드포인트 정의
- **주요 라우트들**:
  - `messages.js` - 채팅 메시지 API
  - `convos.js` - 대화 관리 API
  - `auth.js` - 인증 관련 API
  - `files.js` - 파일 업로드/다운로드
- **기능**: URL 매핑, 미들웨어 적용

**📂 `/api/models/`**
- **역할**: 데이터베이스 스키마 정의
- **주요 모델들**:
  - `Conversation.js` - 대화 데이터 모델
  - `Message.js` - 메시지 데이터 모델
  - `User.js` - 사용자 데이터 모델
- **기능**: MongoDB 문서 구조 정의, 검증 규칙

---

## 🎨 Client 폴더 (프론트엔드)

### `/client` - React 프론트엔드

```
client/
├── 📁 src/
│   ├── App.jsx               # 메인 애플리케이션
│   ├── 📁 components/        # React 컴포넌트
│   │   ├── 📁 Chat/         # 채팅 관련 컴포넌트
│   │   ├── 📁 Messages/     # 메시지 표시
│   │   ├── 📁 Nav/          # 네비게이션
│   │   ├── 📁 Auth/         # 인증 UI
│   │   └── 📁 ui/           # 기본 UI 컴포넌트
│   ├── 📁 hooks/            # 커스텀 React 훅
│   ├── 📁 store/            # Recoil 상태 관리
│   ├── 📁 utils/            # 유틸리티 함수
│   ├── 📁 locales/          # 다국어 번역
│   └── 📁 data-provider/    # API 통신 레이어
├── 📁 public/               # 정적 파일들
└── 📁 dist/                 # 빌드 결과물
```

#### **주요 기능:**

**📂 `/client/src/components/Chat/`**
- **역할**: 채팅 인터페이스 구현
- **주요 컴포넌트들**:
  - `ChatView.tsx` - 메인 채팅 화면
  - `Header.tsx` - 채팅 헤더
  - `Footer.tsx` - 입력 폼
- **기능**: 실시간 메시지 표시, 입력 처리, 파일 업로드

**📂 `/client/src/components/Messages/`**
- **역할**: 메시지 렌더링
- **주요 컴포넌트들**:
  - `MessageContent.tsx` - 메시지 내용 표시
  - `ContentRender.tsx` - 마크다운 렌더링
- **기능**: 마크다운 파싱, 코드 하이라이팅, 이미지 표시

**📂 `/client/src/store/`**
- **역할**: 전역 상태 관리 (Recoil)
- **주요 스토어들**:
  - `conversation.ts` - 대화 상태
  - `submission.ts` - 메시지 전송 상태
  - `user.ts` - 사용자 정보
- **기능**: 상태 저장, 상태 동기화, 로컬 스토리지 연동

**📂 `/client/src/data-provider/`**
- **역할**: API 통신 및 데이터 관리
- **주요 파일들**:
  - `queries.ts` - React Query 쿼리
  - `mutations.ts` - 데이터 변경 로직
- **기능**: HTTP 요청, 캐싱, 에러 처리, 재시도

---

## 📦 Packages 폴더 (공유 패키지)

### `/packages` - 모노레포 공유 라이브러리

```
packages/
├── 📁 api/                   # 백엔드 공통 로직
├── 📁 client/                # 프론트엔드 공통 컴포넌트
├── 📁 data-provider/         # API 통신 라이브러리
└── 📁 data-schemas/          # 데이터 스키마 정의
```

#### **주요 기능:**

**📂 `/packages/data-provider/`**
- **역할**: API 통신 라이브러리
- **기능**: HTTP 클라이언트, 요청/응답 처리, 타입 정의
- **사용**: 프론트엔드와 백엔드 간 데이터 교환

**📂 `/packages/data-schemas/`**
- **역할**: 데이터 구조 정의
- **기능**: Mongoose 스키마, Zod 검증, TypeScript 타입
- **사용**: 데이터 일관성 보장

**📂 `/packages/client/`**
- **역할**: 재사용 가능한 UI 컴포넌트
- **기능**: 공통 React 컴포넌트, 테마, 스타일
- **사용**: 여러 프론트엔드 애플리케이션에서 공유

**📂 `/packages/api/`**
- **역할**: 백엔드 공통 로직
- **기능**: 유틸리티 함수, 미들웨어, 타입 정의
- **사용**: 여러 백엔드 서비스에서 공유

---

## ⚙️ Config 폴더 (설정 및 관리)

### `/config` - 관리 스크립트 및 설정

```
config/
├── create-user.js           # 사용자 생성 스크립트
├── ban-user.js              # 사용자 차단 스크립트
├── add-balance.js           # 잔액 추가 스크립트
├── update.js                # 업데이트 스크립트
└── 📁 translations/         # 번역 관련 스크립트
```

#### **주요 기능:**
- **사용자 관리**: 계정 생성, 삭제, 차단 해제
- **잔액 관리**: 토큰 잔액 조회, 추가, 설정
- **시스템 업데이트**: 의존성 업데이트, 마이그레이션
- **번역 관리**: 다국어 번역 파일 처리

---

## 🧪 E2E 폴더 (테스트)

### `/e2e` - End-to-End 테스트

```
e2e/
├── 📁 specs/                # 테스트 시나리오
├── 📁 setup/                # 테스트 설정
└── playwright.config.ts     # Playwright 설정
```

#### **주요 기능:**
- **UI 테스트**: 사용자 인터랙션 테스트
- **통합 테스트**: 전체 워크플로우 검증
- **접근성 테스트**: 웹 접근성 준수 확인
- **성능 테스트**: 로딩 시간, 응답 속도 측정

---

## 🐳 배포 관련 폴더들

### **Docker 관련**
- `Dockerfile` - 메인 Docker 이미지 빌드
- `docker-compose.yml` - 개발환경 컨테이너 구성
- `deploy-compose.yml` - 프로덕션 배포용

### **Kubernetes 관련** (`/helm`)
```
helm/
├── librechat/              # 메인 앱 Helm 차트
└── librechat-rag-api/      # RAG API Helm 차트
```

### **Redis 설정** (`/redis-config`)
- 클러스터 설정, TLS 설정, 시작/중지 스크립트

---

## 📁 데이터 저장소

### **MongoDB 데이터** (`/data-node`)
- MongoDB 데이터베이스 파일들
- 사용자 데이터, 대화 기록, 설정 정보

### **검색 인덱스** (`/meili_data_v1.12`)
- MeiliSearch 인덱스 파일들
- 전문 검색을 위한 데이터 구조

### **업로드 파일** (`/uploads`)
- 사용자가 업로드한 파일들
- 이미지, 문서, 아바타 등

### **로그 파일** (`/logs`)
- 애플리케이션 로그
- 에러 로그, 디버그 로그

---

## 🔧 설정 파일들

### **환경 설정**
- `.env` - 환경 변수
- `librechat.example.yaml` - 메인 설정 파일

### **개발 도구 설정**
- `eslint.config.mjs` - 코드 스타일 검사
- `package.json` - 의존성 및 스크립트
- `tsconfig.json` - TypeScript 설정

---

## 💡 폴더별 개발 팁

### **백엔드 개발시 (`/api`)**
1. `server/routes/`에서 API 엔드포인트 추가
2. `server/controllers/`에서 비즈니스 로직 구현
3. `models/`에서 데이터 모델 정의
4. `app/clients/`에서 외부 API 연동

### **프론트엔드 개발시 (`/client`)**
1. `components/`에서 UI 컴포넌트 작성
2. `store/`에서 상태 관리 로직 추가
3. `data-provider/`에서 API 호출 로직 구현
4. `locales/`에서 다국어 지원

### **공통 라이브러리 (`/packages`)**
1. 여러 곳에서 사용되는 로직은 여기서 관리
2. 변경시 해당 패키지를 먼저 빌드 필요
3. 타입 정의와 구현을 분리하여 관리

이 구조를 이해하면 LibreChat 프로젝트의 어느 부분을 수정해야 하는지 쉽게 파악할 수 있습니다.